<section class="content">
  <div class="container-fluid">
    <!-------------------------------------------- DataTable --------------------------------------------------->
    <div class="card card-default">
      <div class="card-header">
        <h3 class="card-title">ผลการค้นหา</h3>
        <div class="card-tools">
          <a
            class="btn btn-success"
            data-toggle="modal"
            data-target="#modalDialog"
            (click)="add()"
            >Add</a
          >
          <button
            type="button"
            class="btn btn-tool"
            data-card-widget="collapse"
          >
            <i class="fas fa-minus"></i>
          </button>
        </div>
      </div>
      <div class="card-body">
        <table
          datatable
          [dtOptions]="dtoptions"
          [dtTrigger]="dtTrigger"
          class="table table-bordered table-striped"
        >
          <thead>
            <tr>
              <th>HN เจ้าของ</th>
              <th>ชื่อเจ้าของ</th>
              <th>เบอร์ติดต่อ</th>
              <th>อีเมลล์</th>
              <th>Operation</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of dtData">
              <td>{{ item.useR_CODE }}</td>
              <td
                style="cursor: pointer"
                data-toggle="modal"
                data-target="#modalDialog"
                (click)="editUser(item)"
              >
                {{ item.useR_FIRSTNAME }}&nbsp;{{ item.useR_LASTNAME }}
              </td>
              <td>{{ item.useR_PHONE_NO }}</td>
              <td>{{ item.useR_EMAIL }}</td>
              <td>
                <a
                  class="btn btn-primary"
                  data-toggle="modal"
                  data-target="#modalDialog"
                  (click)="editUser(item)"
                  ><i class="fa fa-edit"></i
                ></a>
                |
                <a class="btn btn-danger" (click)="deleteUser(item.useR_CODE)"
                  ><i class="fa fa-trash"></i
                ></a>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</section>

<div class="modal fade" id="modalDialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header bg-blue">
        <h4 class="modal-title" id="modalTitle">
          {{ isEdit ? "Update User" : "Add User" }}
        </h4>
        <span class="close-btnModal" data-dismiss="modal" aria-label="Close">
          X
        </span>
      </div>
      <div class="modal-body">
        <form
          [formGroup]="userForm"
          (ngSubmit)="isEdit ? updateUser(userForm) : addUser(userForm)"
        >
          <div class="form-group">
            <label>HN</label>
            <input
              type="text"
              placeholder="Code"
              formControlName="useR_CODE"
              class="form-control mb-3"
            />
          </div>
          <div class="form-group">
            <label>ชื่อ</label>
            <input
              type="text"
              placeholder="ชื่อ"
              formControlName="useR_FIRSTNAME"
              class="form-control mb-3"
            />
          </div>
          <div class="form-group">
            <label>นามสกุล</label>
            <input
              type="text"
              placeholder="นามสกุล"
              formControlName="useR_LASTNAME"
              class="form-control mb-3"
            />
          </div>
          <div class="form-group">
            <label>เบอร์ติดต่อ</label>
            <input
              type="text"
              placeholder="เบอร์ติดต่อ"
              formControlName="useR_PHONE_NO"
              class="form-control mb-3"
            />
          </div>
          <div class="form-group">
            <label>E-Mail</label>
            <input
              type="text"
              placeholder="test@example.com"
              formControlName="useR_EMAIL"
              class="form-control mb-3"
            />
          </div>
          <div class="float-right">
            <button
              #closebutton
              type="button"
              class="btn btn-danger mr-2"
              data-dismiss="modal"
            >
              Cancel
            </button>
            <button
              type="submit"
              class="btn btn-primary"
              [disabled]="userForm.invalid"
            >
              {{ isEdit ? "Update" : "Save" }}
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
